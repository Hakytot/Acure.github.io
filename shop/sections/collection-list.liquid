<section class="{{ section.id }}" {% if section.settings.image %} style="background-image: url('{{ section.settings.image | img_url: '1920x' }}');"{% endif %}>
    <div class="container">
        {% if section.settings.enable_title and section.settings.title != blank %}
            <h3 class="section-header widget-title widget-title__light {{ section.settings.alignment }}"><span>{{ section.settings.title | escape }}</span></h3>            
        {% endif %}
        
        {% case section.settings.grid %}
        {% when '2' %}
            {%- assign grid_item_width = 'col-lg-6 col-md-6 col-sm-6' -%}
            {%- assign image_size = '782x550' -%}
        {% when '3' %}
            {%- assign grid_item_width = 'col-lg-4 col-md-4 col-sm-6' -%}
            {%- assign image_size = '508x357' -%}        
        {% when '4' %}
            {%- assign grid_item_width = 'col-lg-3 col-md-3 col-sm-6' -%}
            {%- assign image_size = '371x261' -%}
        {% when '6' %}
            {%- assign grid_item_width = 'col-lg-2 col-md-2 col-sm-6' -%}
            {%- assign image_size = '234x165' -%}
        {% endcase %}

        <div class="collection-list-content widget-content">
            <div class="row">
                {% for block in section.blocks limit: section.blocks.size %}
                <div class="{{ grid_item_width }} col_{{ section.settings.grid }}" {{ block.shopify_attributes }}>
                    {%- assign collection = collections[block.settings.collection] -%}
                    {% include 'collection-grid-item', collection_image_size: image_size %}
                </div>
                {% endfor %}
            </div>
        </div>

        {% if section.blocks.size == 0 %}
            {% include 'no-blocks' %}
        {% endif %}
    </div>
</section>

{% schema %}
{
    "name": "Collection List",
    "class": "shopify-section__collection_list",
    "max_blocks": 12,
    "settings": [{
        "type": "checkbox",
        "id": "enable_title",
        "label": "Enable Heading",
        "default": false
    }, {
        "type": "image_picker",
        "id": "image",
        "label": "Background"
    }, {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "Collection"
    }, {
        "type": "select",
        "id": "alignment",
        "options": [
            { "value": "text-left", "label": "Left" },
            { "value": "text-center", "label": "Center" },
            { "value": "text-right", "label": "Right" }
        ],
        "label": "Heading Alignment"
    }, {
        "type": "select",
        "id": "size",
        "label": "Text Szie",
        "default": "large",
        "options": [{
            "value": "small",
            "label": "Small"
        }, {
            "value": "medium",
            "label": "Medium"
        }, {
            "value": "large",
            "label": "Large"
        }]
    }, {
        "type": "select",
        "id": "grid",
        "label": "Collections per row",
        "default": "2",
        "options": [{
            "value": "2",
            "label": "2"
        }, {
            "value": "3",
            "label": "3"
        }, {
            "value": "4",
            "label": "4"
        }, {
            "value": "6",
            "label": "6"
        }]
    }],
    "blocks": [{
        "type": "featured_collection",
        "name": "Collection",
        "settings": [{
            "label": "Collection",
            "id": "collection",
            "type": "collection"
        }]
    }]
}
{% endschema %}